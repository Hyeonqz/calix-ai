2026-01-08 00:19:30.521 [main] [:] [] INFO  i.g.Hyeonqz.InvestBatchApplicationKt - Starting InvestBatchApplicationKt using Java 21.0.9 with PID 34448 (/Users/jinhyeongyu/toy/calix-ai/core-backend/invest-batch/build/classes/kotlin/main started by jinhyeongyu in /Users/jinhyeongyu/toy/calix-ai/core-backend)
2026-01-08 00:19:30.523 [main] [:] [] INFO  i.g.Hyeonqz.InvestBatchApplicationKt - The following 1 profile is active: "local"
2026-01-08 00:19:30.927 [main] [:] [] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-01-08 00:19:30.960 [main] [:] [] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 2 JPA repository interfaces.
2026-01-08 00:19:31.162 [main] [:] [] DEBUG o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2026-01-08 00:19:31.264 [main] [:] [] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-01-08 00:19:31.300 [main] [:] [] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2026-01-08 00:19:31.318 [main] [:] [] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-01-08 00:19:31.489 [main] [:] [] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-01-08 00:19:31.506 [main] [:] [] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-01-08 00:19:31.606 [main] [:] [] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@32ba5c65
2026-01-08 00:19:31.608 [main] [:] [] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-01-08 00:19:31.644 [main] [:] [] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-01-08 00:19:31.645 [main] [:] [] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2026-01-08 00:19:31.658 [main] [:] [] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-01-08 00:19:32.190 [main] [:] [] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-01-08 00:19:32.220 [main] [:] [] DEBUG org.hibernate.SQL - 
    create table crawling_job (
        id bigint not null auto_increment,
        created_at datetime(6) not null,
        updated_at datetime(6) not null,
        completed_at datetime(6),
        error_message varchar(2000),
        fail_count integer,
        job_name varchar(100) not null,
        started_at datetime(6) not null,
        status enum ('FAILED','RUNNING','SUCCESS') not null,
        success_count integer,
        target_url varchar(2048),
        total_count integer,
        primary key (id)
    ) engine=InnoDB
2026-01-08 00:19:32.239 [main] [:] [] DEBUG org.hibernate.SQL - 
    create table raw_crawled_data (
        id bigint not null auto_increment,
        created_at datetime(6) not null,
        updated_at datetime(6) not null,
        content LONGTEXT not null,
        content_type varchar(50),
        crawled_at datetime(6) not null,
        error_message varchar(2000),
        processed_at datetime(6),
        source_url varchar(2048) not null,
        status enum ('FAILED','PENDING','PROCESSED','PROCESSING') not null,
        title varchar(500),
        primary key (id)
    ) engine=InnoDB
2026-01-08 00:19:32.249 [main] [:] [] DEBUG org.hibernate.SQL - 
    create index idx_job_name 
       on crawling_job (job_name)
2026-01-08 00:19:32.272 [main] [:] [] DEBUG org.hibernate.SQL - 
    create index idx_started_at 
       on crawling_job (started_at)
2026-01-08 00:19:32.283 [main] [:] [] DEBUG org.hibernate.SQL - 
    create index idx_status 
       on crawling_job (status)
2026-01-08 00:19:32.293 [main] [:] [] DEBUG org.hibernate.SQL - 
    create index idx_source_url 
       on raw_crawled_data (source_url)
2026-01-08 00:19:32.600 [main] [:] [] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create index idx_source_url 
       on raw_crawled_data (source_url)" via JDBC [Specified key was too long; max key length is 3072 bytes]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create index idx_source_url 
       on raw_crawled_data (source_url)" via JDBC [Specified key was too long; max key length is 3072 bytes]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:576)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:516)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applyIndexes(AbstractSchemaMigrator.java:361)
	at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:96)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:233)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:280)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1429)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at io.github.Hyeonqz.InvestBatchApplicationKt.main(InvestBatchApplication.kt:15)
Caused by: java.sql.SQLSyntaxErrorException: Specified key was too long; max key length is 3072 bytes
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 36 common frames omitted
2026-01-08 00:19:32.601 [main] [:] [] DEBUG org.hibernate.SQL - 
    create index idx_status 
       on raw_crawled_data (status)
2026-01-08 00:19:32.613 [main] [:] [] DEBUG org.hibernate.SQL - 
    create index idx_crawled_at 
       on raw_crawled_data (crawled_at)
2026-01-08 00:19:32.622 [main] [:] [] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-01-08 00:19:33.005 [main] [:] [] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-01-08 00:19:34.074 [main] [:] [] INFO  org.quartz.impl.StdSchedulerFactory - Using default implementation for ThreadExecutor
2026-01-08 00:19:34.087 [main] [:] [] INFO  o.quartz.core.SchedulerSignalerImpl - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
2026-01-08 00:19:34.087 [main] [:] [] INFO  org.quartz.core.QuartzScheduler - Quartz Scheduler v2.5.0 created.
2026-01-08 00:19:34.092 [main] [:] [] INFO  o.s.s.quartz.LocalDataSourceJobStore - Using db table-based data access locking (synchronization).
2026-01-08 00:19:34.095 [main] [:] [] INFO  o.s.s.quartz.LocalDataSourceJobStore - JobStoreCMT initialized.
2026-01-08 00:19:34.096 [main] [:] [] INFO  org.quartz.core.QuartzScheduler - Scheduler meta-data: Quartz Scheduler (v2.5.0) 'InvestBatchScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 5 threads.
  Using job-store 'org.springframework.scheduling.quartz.LocalDataSourceJobStore' - which supports persistence. and is not clustered.

2026-01-08 00:19:34.097 [main] [:] [] INFO  org.quartz.impl.StdSchedulerFactory - Quartz scheduler 'InvestBatchScheduler' initialized from an externally provided properties instance.
2026-01-08 00:19:34.097 [main] [:] [] INFO  org.quartz.impl.StdSchedulerFactory - Quartz scheduler version: 2.5.0
2026-01-08 00:19:34.097 [main] [:] [] INFO  org.quartz.core.QuartzScheduler - JobFactory set to: org.springframework.scheduling.quartz.SpringBeanJobFactory@32c60fec
2026-01-08 00:19:34.128 [main] [:] [] DEBUG o.s.s.c.ThreadPoolTaskScheduler - Initializing ExecutorService 'taskScheduler'
2026-01-08 00:19:34.147 [main] [:] [] INFO  o.s.s.quartz.SchedulerFactoryBean - Starting Quartz Scheduler now
2026-01-08 00:19:36.173 [main] [:] [] WARN  o.s.c.a.AnnotationConfigApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'quartzScheduler'
2026-01-08 00:19:36.173 [main] [:] [] DEBUG o.s.s.c.ThreadPoolTaskScheduler - Shutting down ExecutorService 'taskScheduler'
2026-01-08 00:19:36.173 [main] [:] [] INFO  o.s.s.quartz.SchedulerFactoryBean - Shutting down Quartz Scheduler
2026-01-08 00:19:36.173 [main] [:] [] INFO  org.quartz.core.QuartzScheduler - Scheduler InvestBatchScheduler_$_NON_CLUSTERED shutting down.
2026-01-08 00:19:36.174 [main] [:] [] INFO  org.quartz.core.QuartzScheduler - Scheduler InvestBatchScheduler_$_NON_CLUSTERED paused.
2026-01-08 00:19:36.174 [main] [:] [] DEBUG o.s.s.quartz.LocalDataSourceJobStore - JobStore background threads shutdown.
2026-01-08 00:19:36.174 [main] [:] [] INFO  org.quartz.core.QuartzScheduler - Scheduler InvestBatchScheduler_$_NON_CLUSTERED shutdown complete.
2026-01-08 00:19:36.175 [main] [:] [] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-01-08 00:19:36.176 [main] [:] [] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-01-08 00:19:36.184 [main] [:] [] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-01-08 00:19:36.184 [main] [:] [] DEBUG o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2026-01-08 00:19:36.189 [main] [:] [] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-01-08 00:19:36.200 [main] [:] [] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.context.ApplicationContextException: Failed to start bean 'quartzScheduler'
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:408)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:394)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:586)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:364)
	at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:310)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:1006)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:630)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at io.github.Hyeonqz.InvestBatchApplicationKt.main(InvestBatchApplication.kt:15)
Caused by: org.springframework.scheduling.SchedulingException: Could not start Quartz Scheduler
	at org.springframework.scheduling.quartz.SchedulerFactoryBean.start(SchedulerFactoryBean.java:803)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:405)
	... 13 common frames omitted
Caused by: org.quartz.SchedulerConfigException: Failure occurred during job recovery.
	at org.quartz.impl.jdbcjobstore.JobStoreSupport.schedulerStarted(JobStoreSupport.java:698)
	at org.quartz.core.QuartzScheduler.start(QuartzScheduler.java:533)
	at org.quartz.impl.StdScheduler.start(StdScheduler.java:143)
	at org.springframework.scheduling.quartz.SchedulerFactoryBean.startScheduler(SchedulerFactoryBean.java:731)
	at org.springframework.scheduling.quartz.SchedulerFactoryBean.start(SchedulerFactoryBean.java:800)
	... 14 common frames omitted
Caused by: org.quartz.impl.jdbcjobstore.LockException: Failure obtaining db row lock: Table 'invest_calix.QRTZ_LOCKS' doesn't exist
	at org.quartz.impl.jdbcjobstore.StdRowLockSemaphore.executeSQL(StdRowLockSemaphore.java:185)
	at org.quartz.impl.jdbcjobstore.DBSemaphore.obtainLock(DBSemaphore.java:112)
	at org.quartz.impl.jdbcjobstore.JobStoreSupport.executeInNonManagedTXLock(JobStoreSupport.java:3729)
	at org.quartz.impl.jdbcjobstore.JobStoreSupport.recoverJobs(JobStoreSupport.java:836)
	at org.quartz.impl.jdbcjobstore.JobStoreSupport.schedulerStarted(JobStoreSupport.java:696)
	... 18 common frames omitted
Caused by: java.sql.SQLSyntaxErrorException: Table 'invest_calix.QRTZ_LOCKS' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:112)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:990)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:1058)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.quartz.impl.jdbcjobstore.StdRowLockSemaphore.executeSQL(StdRowLockSemaphore.java:122)
	... 22 common frames omitted
